"use strict";const Emojis=function(){const o="suneditor-emojis-fav",i="suneditor-emojis-sup",s=!1,r={};let c={},a=void 0;function l(){var e;return(e=function(e){try{return JSON.parse(e)}catch(e){return!1}}(localStorage.getItem(o)))?e:(t(),[])}function t(){r[""]=[],localStorage.setItem(o,JSON.stringify(r[""]))}function u(e){const t=document.body.appendChild(document.createElement("span"));return t.classList.add("se-emoji"),t.appendChild(document.createTextNode(e)),e=parseFloat(t.offsetWidth),t.parentNode.removeChild(t),e}function m(o){if(o in c)return c[o];var e,t;let n=1;return f.canvas.width=f.canvas.height=1,f.fillText(o,-4,4),0<f.getImageData(0,0,1,1).data[3]?u(o)>a&&(n=function(){var e=Array.from(o);if(1===e.length)return!1;let t=0;for(const n of e)/\p{Emoji}/u.test(n)&&t++;return 2<t}()?1:2):n=0,e=o,t=n,e&&(c[e]=t,s||localStorage.setItem(i,JSON.stringify(c))),n}function d(e){for(const n in r)if(""!==n)for(const o in r[n]){var t=r[n][o];if(t.emoji===e)return t}return!1}window.addEventListener("load",function(){a=u("üòÄ")});const f=document.createElement("canvas").getContext("2d",{willReadFrequently:!0}),n=function(){const e=document.currentScript.src.split("/");return e.pop(),e.join("/")},p=function(i){function s(e,t,n){e[n]=e[t],delete e[t]}return new Promise(function(e){var t=JSON.parse(i);const n=!Object.keys(c).length;r[""]=l();for(const o in t)r[o]=t[o],r[o].forEach(function(e){s(e,"n","name"),s(e,"e","emoji"),s(e,"s","skintone"),n&&m(e.emoji)});e(!0)})},h={neutral:"",light:127995,mediumLight:127996,medium:127997,mediumDark:127998,dark:127999};return{init:function(){return new Promise(function(e){!function(){if(s)return;const e=localStorage.getItem(i);c=e?JSON.parse(e):{}}(),new Promise(function(t){try{fetch(n()+"/data-by-group.16.min.json",{method:"GET",headers:{Accept:"application/json"}}).then(e=>e.text()).then(e=>t(p(e)))}catch(e){console.log("fetchEmojis",e),t(e)}}).then(function(){e(r)})})},emojis:r,getEmoji:d,isSupported:m,registerEmoji:function(e){for(const n in r[""])if(r[""][n].emoji===e)return!1;var t=d(e);return r[""].push(t),localStorage.setItem(o,JSON.stringify(r[""])),!0},getRegistered:l,resetRegistered:t,toSkinTone:function(e,t){const n=/\p{Emoji_Modifier_Base}/gu;let o="";for(const i of e=e.replaceAll(/[\u{1F3FB}-\u{1F3FF}]/gu,""))65039!==i&&(o+=i,n.test(i)&&(o+=String.fromCodePoint(h[t])));return o},skinTones:Object.keys(h)}}(),emojis=(Emojis.init(),function(r){const s="se-emojis-menu",c="se-emojis-recent",a="se-emojis-result",l=["Smileys & Emotion","Activities","Animals & Nature","Flags","Food & Drink","Objects","People & Body","Symbols","Travel & Places"];let i=void 0,u={groups:l.slice(),captions:l.slice(),showRecent:!0,iconSize:"1.5rem",skinTone:"neutral",topmenu:{search:!1,skinTone:!1,iconSize:!1,recent:!1},showFallbacks:!1,tagName:"span"};const m=Object.assign({},u);function d(e){var t=void 0===e;const n=(e=e||document.querySelector(".se-emojis-layer")).querySelector('.se-emojis div[name="'+c+'"]');t&&(n.innerText=""),r.emojis&&r.emojis[""]&&r.emojis[""].forEach(function(e){y(e,n)}),o(n)}const f=function(t){for(let e=0;e<9;e++)t.insertAdjacentHTML("beforeend",'<span style="flex:1;"></span>')},p=function(e){var t=void 0===e;if(e=e||document.querySelector(".se-emojis-layer"),u.captions)for(var n of u.groups){const i=e.querySelector('div[name="'+n+'"]');t&&i&&(i.innerText=""),r.emojis[n]&&r.emojis[n].length?(r.emojis[n].forEach(function(e){e&&i&&y(e,i)}),f(i)):console.log(`error: emoji does not exist for type '${n}'`)}else{const s=e.querySelector('div[name="emojis"]');t&&s&&(s.innerText="");for(var o of u.groups)r.emojis[o]&&r.emojis[o].length?r.emojis[o].forEach(function(e){e&&s&&y(e,s)}):console.log(`error: emoji does not exist for type '${o}'`);f(s)}},h=function(n){if(n=n||document.querySelector('.se-emojis div[name="'+s+'"]')){n.innerText="";for(const e in u.topmenu)if(!0===u.topmenu[e])switch(e){case"iconSize":n.insertAdjacentHTML("beforeEnd",'<div class="topmenu-item"><span class="btn-iconsize" data-type="+" title="increase icon size">‚ûï</span><span class="btn-iconsize" data-type="-" title="decrease icon size">‚ûñ</span></div>'),setTimeout(function(){n.querySelectorAll(".btn-iconsize").forEach(function(n){n.onclick=function(){let t=parseFloat(u.iconSize);var e=u.iconSize.replace(t,"");t="+"===n.getAttribute("data-type")?t+.2:t-.2,t+=e,document.querySelectorAll(".se-emojis .se-emojis-group").forEach(function(e){e.style.fontSize=t}),u.iconSize=t}})});break;case"skinTone":{t=void 0;o=void 0;let e="";for(const i of r.skinTones.slice().reverse()){var t=i===u.skinTone?" btn-skintone-active":"",o=i.replace(/([A-Z])/g," $1").toLowerCase();e+='<span title="Skintone '+o+'" class="btn-skintone'+t+'" data-skintone="'+i+'" >'+r.toSkinTone("üëç",i)+"</span>"}n.insertAdjacentHTML("beforeEnd",'<div class="topmenu-item">'+e+"</div>"),n.querySelectorAll(".btn-skintone").forEach(function(e){e.onclick=function(){j(),u.skinTone=this.getAttribute("data-skintone"),p(),h(n)}})}break;case"search":!function(){const e="  üîç";n.insertAdjacentHTML("beforeEnd",'<div class=""><input class="se-emojis-search" type="search" placeholder="  üîç" dir="rtl" max-length="7" size="7" spellcheck="false"></div>');const t=n.querySelector(".se-emojis-search");t.onclick=function(){t.removeAttribute("dir"),t.placeholder="",t.value&&v(this.value)},t.onsearch=function(){t.value||(t.setAttribute("dir","rtl"),t.placeholder=e),t.blur(),j()},t.onblur=t.onsearch,t.onkeyup=function(){this.value||(t.setAttribute("dir","rtl"),t.placeholder=e),v(this.value)}}()}setTimeout(function(){n.style.width=getComputedStyle(document.querySelector(".se-emojis")).width},50)}},j=function(){document.querySelectorAll(".se-emojis-group").forEach(function(e){e.style.display="block"});const e=document.querySelector('div[name="'+a+'"]');e&&(e.innerText="",e.style.display="none")},v=function(t){if(t){{var e=t;const i=document.querySelector('div[name="'+a+'"]');i.innerHTML="<header><q>"+e+"</q></header><div></div>",i.style.display="block",document.querySelectorAll(".se-emojis-group").forEach(function(e){e.style.display="hidden"}),document.querySelector(".se-emojis-layer").scrollTop=0}t=t.toLowerCase();const o=document.querySelector('div[name="'+a+'"] div');for(var n in r.emojis)r.emojis[n].forEach(function(e){e&&-1<e.name.toLowerCase().indexOf(t)&&!0!==function(e){for(const t of o.querySelectorAll(".btn-emoji"))if(t.querySelector("span").getAttribute("data-emoji")===e)return!0}(e.emoji)&&y(e,o)});""===o.innerText?o.innerHTML="<small>... &nbsp;</small>":f(o)}else j()},o=function(e){if(e&&""!==e.innerText){const t=document.createElement("i");t.classList.add("clear-recent"),t.title="Clear recent",t.innerHTML="&times;",t.onclick=function(){r.resetRegistered(),d()},e.appendChild(t)}},y=function(e,t){switch(r.isSupported(e.emoji)){case 0:return;case 1:break;case 2:if(u.showFallbacks)break;return}const n=document.createElement("button");var o=e.skintone&&"neutral"!==u.skinTone?r.toSkinTone(Object.assign({},e).emoji,u.skinTone):e.emoji,i=e.name.charAt(0).toUpperCase()+e.name.slice(1);n.className="btn-emoji",n.type="button",n.title=i,n.innerHTML='<span class="emoji" data-emoji="'+e.emoji+'">'+o+"</span>",n.addEventListener("click",g.bind()),t.appendChild(n)},g=function(e){const t=e.target.querySelector("span");var e=t.innerText,n=t.getAttribute("data-emoji");"string"==typeof u.tagName&&""!==u.tagName?i.functions.insertHTML(`<${u.tagName} class="se-emoji">${e}</${u.tagName}>&zwj;`,!0,!0):i.functions.insertHTML(e,!0),u.showRecent&&r.registerEmoji(n)&&d()};return{name:"emojis",display:"submenu",innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" id="smiley"><path fill="#444" d="M8 1c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7zm0-1C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8z"></path><path fill="#444" d="M8 13.2c-2 0-3.8-1.2-4.6-3.1l.9-.4c.6 1.5 2.1 2.4 3.7 2.4s3.1-1 3.7-2.4l.9.4c-.8 2-2.6 3.1-4.6 3.1zM7 6a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM11 6a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"></path></svg>',title:"Insert Emojis",add:function(e,t){i=e,u=Object.assign({},m,i.options.emojis);let n=function(){const e=u.topmenu&&(u.topmenu.search||u.topmenu.iconSize||u.topmenu.skinTone);let t=this.util.createElement("div"),n=(t.className="se-submenu se-list-layer se-emojis-layer",t.style.paddingTop=0,'<div class="se-list-inner">');if(n+='<div class="se-emojis">',e)n+=`<div name="${s}" class="topmenu"></div>`;if(u.showRecent)n+=`<div name="${c}" class="se-emojis-recent"></div>`;if(e&&u.topmenu.search)n+=`<div name="${a}" class="se-emojis-group se-emojis-result" style="font-size:${u.iconSize};"></div>`;if(u.captions)for(const[o,i]of u.groups.entries())if(l.includes(i)){n+=`<div class="se-emojis-group" style="font-size:${u.iconSize};">`;if(u.captions[o])n+=`<header>${u.captions[o]}</header>`;n+=`<div name="${i}"></div></div>`}else console.warn('group "'+i+'" is not valid');else n+=`<div class="se-emojis-group" style="font-size:${u.iconSize};"><div name="emojis"></div></div>`;return t.innerHTML=n,t}.call(e);const o=n.querySelector('div[name="'+s+'"]');p(n),h(o),e.initMenuTarget("emojis",t,n),u.height&&(document.querySelector(".se-emojis").style.height=u.height,document.querySelector(".se-emojis-layer").style.overflowY="hidden"),u.width&&(document.querySelector(".se-emojis").style.width=u.width),u.showRecent&&(d(n),o&&setTimeout(function(){n.querySelector('div[name="'+c+'"]').style.marginTop=o.offsetHeight+"px"}))}}}(Emojis));