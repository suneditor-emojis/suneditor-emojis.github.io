"use strict";const Emojis=function(){const o="suneditor-emojis-fav",i="suneditor-emojis-sup",s=!1,r={};let c={},a=void 0;function l(){var e;return(e=function(e){try{return JSON.parse(e)}catch(e){return!1}}(localStorage.getItem(o)))?e:(t(),[])}function t(){r[""]=[],localStorage.setItem(o,JSON.stringify(r[""]))}function u(e){const t=document.body.appendChild(document.createElement("span"));return t.classList.add("se-emoji"),t.appendChild(document.createTextNode(e)),e=parseFloat(t.offsetWidth),t.parentNode.removeChild(t),e}window.addEventListener("load",function(){a=u("üòÄ")});const m=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});function d(e){for(const n in r)if(""!==n)for(const o in r[n]){var t=r[n][o];if(t.emoji===e)return t}return!1}const e=function(){const e=document.currentScript.src.split("/");return e.pop(),e.join("/")},n=function(e){function t(e,t,n){e[n]=e[t],delete e[t]}var n=JSON.parse(e);r[""]=l();for(const o in n)r[o]=n[o],r[o].forEach(function(e){t(e,"n","name"),t(e,"e","emoji"),t(e,"s","skintone")})},f={neutral:"",light:127995,mediumLight:127996,medium:127997,mediumDark:127998,dark:127999};return{init:function(){!function(){if(s)return;const e=localStorage.getItem(i);c=e?JSON.parse(e):{}}();try{fetch(e()+"/data-by-group.16.min.json",{method:"GET",headers:{Accept:"application/json"}}).then(e=>e.text()).then(e=>n(e))}catch(e){console.log("fetchEmojis",e)}},emojis:r,getEmoji:d,isSupported:function(o){if(o in c)return c[o];var e,t;let n=void 0;return m.canvas.width=m.canvas.height=1,m.fillText(o,-4,4),0<m.getImageData(0,0,1,1).data[3]?u(o)>a&&(n=function(){var e=Array.from(o);if(1===e.length)return!1;let t=0;for(const n of e)/\p{Emoji}/u.test(n)&&t++;return 2<t}()?1:2):n=0,e=o,t=n,e&&(c[e]=t,s||localStorage.setItem(i,JSON.stringify(c))),n},registerEmoji:function(e){for(const n in r[""])if(r[""][n].emoji===e)return!1;var t=d(e);return r[""].push(t),localStorage.setItem(o,JSON.stringify(r[""])),!0},getRegistered:l,resetRegistered:t,toSkinTone:function(e,t){const n=/\p{Emoji_Modifier_Base}/gu;let o="";for(const i of e=e.replaceAll(/[\u{1F3FB}-\u{1F3FF}]/gu,""))65039!==i&&(o+=i,n.test(i)&&(o+=String.fromCodePoint(f[t])));return o},skinTones:Object.keys(f)}}(),emojis=function(r){const c="se-emojis-menu",a="se-emojis-recent",l="se-emojis-result",u=["Smileys & Emotion","Activities","Animals & Nature","Flags","Food & Drink","Objects","People & Body","Symbols","Travel & Places"];let o=void 0,m={groups:u.slice(),captions:u.slice(),showRecent:!0,iconSize:"1.5rem",skinTone:"neutral",topmenu:{search:!1,skinTone:!1,iconSize:!1,recent:!1},showFallbacks:!1,tagName:"span"};const i=Object.assign({},m);r.init();function s(e){var t=void 0===e;const n=(e=e||document.querySelector(".se-emojis-layer")).querySelector('.se-emojis div[name="'+a+'"]');t&&(n.innerText=""),r.emojis&&r.emojis[""]&&r.emojis[""].forEach(function(e){y(e,n)}),v(n)}const d=function(t){for(let e=0;e<9;e++)t.insertAdjacentHTML("beforeend",'<span style="flex:1;"></span>')},f=function(e){var t=void 0===e;if(e=e||document.querySelector(".se-emojis-layer"),m.captions)for(var n of m.groups){const i=e.querySelector('div[name="'+n+'"]');t&&i&&(i.innerText=""),r.emojis[n]&&r.emojis[n].length?(r.emojis[n].forEach(function(e){e&&i&&y(e,i)}),d(i)):console.log(`error: emoji does not exist for type '${type}'`)}else{const s=e.querySelector('div[name="emojis"]');t&&s&&(s.innerText="");for(var o of m.groups)r.emojis[o]&&r.emojis[o].length?r.emojis[o].forEach(function(e){e&&s&&y(e,s)}):console.log(`error: emoji does not exist for type '${type}'`);d(s)}},p=function(n){if(n=n||document.querySelector('.se-emojis div[name="'+c+'"]')){n.innerText="";for(const e in m.topmenu)if(!0===m.topmenu[e])switch(e){case"iconSize":n.insertAdjacentHTML("beforeEnd",'<div class="topmenu-item"><span class="btn-iconsize" data-type="+" title="increase icon size">‚ûï</span><span class="btn-iconsize" data-type="-" title="decrease icon size">‚ûñ</span></div>'),setTimeout(function(){n.querySelectorAll(".btn-iconsize").forEach(function(n){n.onclick=function(){let t=parseFloat(m.iconSize);var e=m.iconSize.replace(t,"");t="+"===n.getAttribute("data-type")?t+.2:t-.2,t+=e,document.querySelectorAll(".se-emojis .se-emojis-group").forEach(function(e){e.style.fontSize=t}),m.iconSize=t}})});break;case"skinTone":{t=void 0;o=void 0;let e="";for(const i of r.skinTones.slice().reverse()){var t=i===m.skinTone?" btn-skintone-active":"",o=i.replace(/([A-Z])/g," $1").toLowerCase();e+='<span title="Skintone '+o+'" class="btn-skintone'+t+'" data-skintone="'+i+'" >'+r.toSkinTone("üëç",i)+"</span>"}n.insertAdjacentHTML("beforeEnd",'<div class="topmenu-item">'+e+"</div>"),n.querySelectorAll(".btn-skintone").forEach(function(e){e.onclick=function(){h(),m.skinTone=this.getAttribute("data-skintone"),f(),p(n)}})}break;case"search":!function(){const e="  üîç";n.insertAdjacentHTML("beforeEnd",'<div class=""><input class="se-emojis-search" type="search" placeholder="  üîç" dir="rtl" max-length="7" size="7" spellcheck="false"></div>');const t=n.querySelector(".se-emojis-search");t.onclick=function(){t.removeAttribute("dir"),t.placeholder="",t.value&&j(this.value)},t.onsearch=function(){t.value||(t.setAttribute("dir","rtl"),t.placeholder=e),t.blur(),h()},t.onblur=t.onsearch,t.onkeyup=function(){this.value||(t.setAttribute("dir","rtl"),t.placeholder=e),j(this.value)}}()}setTimeout(function(){n.style.width=getComputedStyle(document.querySelector(".se-emojis")).width},50)}},h=function(){document.querySelectorAll(".se-emojis-group").forEach(function(e){e.style.display="block"});const e=document.querySelector('div[name="'+l+'"]');e&&(e.innerText="",e.style.display="none")},j=function(t){if(t){{var e=t;const i=document.querySelector('div[name="'+l+'"]');i.innerHTML="<header><q>"+e+"</q></header><div></div>",i.style.display="block",document.querySelectorAll(".se-emojis-group").forEach(function(e){e.style.display="hidden"}),document.querySelector(".se-emojis-layer").scrollTop=0}t=t.toLowerCase();const o=document.querySelector('div[name="'+l+'"] div');for(var n in r.emojis)r.emojis[n].forEach(function(e){e&&-1<e.name.toLowerCase().indexOf(t)&&y(e,o)});""===o.innerText?o.innerHTML="<small>... &nbsp;</small>":d(o)}else h()},v=function(e){if(e&&""!==e.innerText){const t=document.createElement("i");t.classList.add("clear-recent"),t.title="Clear recent",t.innerHTML="&times;",t.onclick=function(){r.resetRegistered(),s()},e.appendChild(t)}},y=function(e,t){switch(r.isSupported(e.emoji)){case 0:return;case 1:break;case 2:if(m.showFallbacks)break;return}const n=document.createElement("button");var o=e.skintone&&"neutral"!==m.skinTone?r.toSkinTone(Object.assign({},e).emoji,m.skinTone):e.emoji,i=e.name.charAt(0).toUpperCase()+e.name.slice(1);n.className="btn-emoji",n.type="button",n.title=i,n.innerHTML='<span class="emoji" data-emoji="'+e.emoji+'">'+o+"</span>",n.addEventListener("click",g.bind()),t.appendChild(n)},g=function(e){const t=e.target.querySelector("span");var e=t.innerText,n=t.getAttribute("data-emoji");"string"==typeof m.tagName&&""!==m.tagName?o.functions.insertHTML(`<${m.tagName} class="se-emoji">${e}</${m.tagName}>&zwj;`,!0,!0):o.functions.insertHTML(e,!0),m.showRecent&&r.registerEmoji(n)&&s()};return{name:"emojis",display:"submenu",innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" id="smiley"><path fill="#444" d="M8 1c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7zm0-1C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8z"></path><path fill="#444" d="M8 13.2c-2 0-3.8-1.2-4.6-3.1l.9-.4c.6 1.5 2.1 2.4 3.7 2.4s3.1-1 3.7-2.4l.9.4c-.8 2-2.6 3.1-4.6 3.1zM7 6a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM11 6a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"></path></svg>',title:"Insert Emojis",add:function(e,t){o=e;o.options.emojis&&(m=Object.assign({},i,o.options.emojis));let n=function(){const e=m.topmenu&&(m.topmenu.search||m.topmenu.iconSize||m.topmenu.skinTone);let t=this.util.createElement("div"),n=(t.className="se-submenu se-list-layer se-emojis-layer",t.style.paddingTop=0,'<div class="se-list-inner">');if(n+='<div class="se-emojis">',e)n+=`<div name="${c}" class="topmenu"></div>`;if(m.showRecent){const o=e?'style="margin-top:2.2rem;"':"";n+=`<div name="${a}" ${o} class="se-emojis-recent"></div>`}if(e&&m.topmenu.search)n+=`<div name="${l}" class="se-emojis-group se-emojis-result" style="font-size:${m.iconSize};"></div>`;if(m.captions)for(const[i,s]of m.groups.entries())if(u.includes(s)){n+=`<div class="se-emojis-group" style="font-size:${m.iconSize};">`;if(m.captions[i])n+=`<header>${m.captions[i]}</header>`;n+=`<div name="${s}"></div></div>`}else console.warn('group "'+s+'" is not valid');else n+=`<div class="se-emojis-group" style="font-size:${m.iconSize};"><div name="emojis"></div></div>`;return t.innerHTML=n,t}.call(e);f(n),m.showRecent&&s(n),p(n.querySelector('div[name="'+c+'"]')),e.initMenuTarget("emojis",t,n),m.height&&(document.querySelector(".se-emojis").style.height=m.height,document.querySelector(".se-emojis-layer").style.overflowY="hidden"),m.width&&(document.querySelector(".se-emojis").style.width=m.width)}}}(Emojis);