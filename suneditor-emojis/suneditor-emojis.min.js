"use strict";const Emojis=function(){const i="suneditor-emojis-fav",o="suneditor-emojis-sup",s=!1,r={};let c={},a=void 0;function l(){var e;return(e=function(e){try{return JSON.parse(e)}catch(e){return!1}}(localStorage.getItem(i)))?e:(t(),[])}function t(){r[""]=[],localStorage.setItem(i,JSON.stringify(r[""]))}function u(e){const t=document.body.appendChild(document.createElement("span"));return t.classList.add("se-emoji"),t.appendChild(document.createTextNode(e)),e=parseFloat(t.offsetWidth),t.parentNode.removeChild(t),e}window.addEventListener("load",function(){a=u("üòÄ")});const d=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});function m(e){for(const n in r)if(""!==n)for(const i in r[n]){var t=r[n][i];if(t.emoji===e)return t}return!1}const e=function(){const e=document.currentScript.src.split("/");return e.pop(),e.join("/")},n=function(e){function t(e,t,n){e[n]=e[t],delete e[t]}var n=JSON.parse(e);r[""]=l();for(const i in n)r[i]=n[i],r[i].forEach(function(e){t(e,"n","name"),t(e,"e","emoji"),t(e,"s","skintone")})},f={neutral:"",light:127995,mediumLight:127996,medium:127997,mediumDark:127998,dark:127999};return{init:function(){!function(){if(s)return;const e=localStorage.getItem(o);c=e?JSON.parse(e):{}}();try{fetch(e()+"/data-by-group.16.min.json",{method:"GET",headers:{Accept:"application/json"}}).then(e=>e.text()).then(e=>n(e))}catch(e){console.log("fetchEmojis",e)}},emojis:r,getEmoji:m,isSupported:function(i){if(i in c)return c[i];var e,t;let n=void 0;return d.canvas.width=d.canvas.height=1,d.fillText(i,-4,4),0<d.getImageData(0,0,1,1).data[3]?u(i)>a&&(n=function(){var e=Array.from(i);if(1===e.length)return!1;let t=0;for(const n of e)/\p{Emoji}/u.test(n)&&t++;return 2<t}()?1:2):n=0,e=i,t=n,e&&(c[e]=t,s||localStorage.setItem(o,JSON.stringify(c))),n},registerEmoji:function(e){for(const n in r[""])if(r[""][n].emoji===e)return!1;var t=m(e);return r[""].push(t),localStorage.setItem(i,JSON.stringify(r[""])),!0},getRegistered:l,resetRegistered:t,toSkinTone:function(e,t){const n=/\p{Emoji_Modifier_Base}/gu;let i="";for(const o of e=e.replaceAll(/[\u{1F3FB}-\u{1F3FF}]/gu,""))65039!==o&&(i+=o,n.test(o)&&(i+=String.fromCodePoint(f[t])));return i},skinTones:Object.keys(f)}}(),emojis=function(c){const s="se-emojis-menu",r="se-emojis-recent",a="se-emojis-result",l=["Smileys & Emotion","Activities","Animals & Nature","Flags","Food & Drink","Objects","People & Body","Symbols","Travel & Places"];let o=void 0,u={groups:l.slice(),captions:l.slice(),showRecent:!0,iconSize:"1.5rem",skinTone:"neutral",topmenu:{search:!1,skinTone:!1,iconSize:!1,recent:!1},showFallbacks:!1,tagName:"span"};const d=Object.assign({},u);c.init();function m(e){if(e&&""!==e.innerText){const t=document.createElement("i");t.classList.add("clear-recent"),t.title="Clear recent",t.innerHTML="&times;",t.onclick=function(){c.resetRegistered(),i()},e.appendChild(t)}}const f=function(e){var t,n=void 0===e;for(t in e=e||document.querySelector(".se-emojis-layer"),c.emojis){const i=e.querySelector('div[name="'+(t||r)+'"]');n&&i&&(i.innerText=""),c.emojis[t]&&c.emojis[t].length?c.emojis[t].forEach(function(e){e&&i&&y(e,i)}):console.log(`error: emoji does not exist for type '${t}'`)}},p=function(n){if(n=n||document.querySelector('.se-emojis div[name="'+s+'"]')){n.innerText="";for(const e in u.topmenu)if(!0===u.topmenu[e])switch(e){case"iconSize":n.insertAdjacentHTML("beforeEnd",'<div class="topmenu-item"><span class="btn-iconsize" data-type="+" title="increase icon size">‚ûï</span><span class="btn-iconsize" data-type="-" title="decrease icon size">‚ûñ</span></div>'),setTimeout(function(){n.querySelectorAll(".btn-iconsize").forEach(function(n){n.onclick=function(){let t=parseFloat(u.iconSize);var e=u.iconSize.replace(t,"");t="+"===n.getAttribute("data-type")?t+.2:t-.2,t+=e,document.querySelectorAll(".se-emojis .se-emojis-group").forEach(function(e){e.style.fontSize=t}),u.iconSize=t}})});break;case"skinTone":{t=void 0;i=void 0;let e="";for(const o of c.skinTones.slice().reverse()){var t=o===u.skinTone?" btn-skintone-active":"",i=o.replace(/([A-Z])/g," $1").toLowerCase();e+='<span title="Skintone '+i+'" class="btn-skintone'+t+'" data-skintone="'+o+'" >'+c.toSkinTone("üëç",o)+"</span>"}n.insertAdjacentHTML("beforeEnd",'<div class="topmenu-item">'+e+"</div>"),n.querySelectorAll(".btn-skintone").forEach(function(e){e.onclick=function(){h(),u.skinTone=this.getAttribute("data-skintone"),f(),p(n)}})}break;case"search":!function(){const e="  üîç";n.insertAdjacentHTML("beforeEnd",`<div class="">
				<input class="se-emojis-search" type="search" placeholder="  üîç" dir="rtl" max-length="7" size="7" spellcheck="false">
			</div>`);const t=n.querySelector(".se-emojis-search");t.onclick=function(){t.removeAttribute("dir"),t.placeholder="",t.value&&v(this.value)},t.onsearch=function(){t.value||(t.setAttribute("dir","rtl"),t.placeholder=e),t.blur(),h()},t.onblur=t.onsearch,t.onkeyup=function(){this.value||(t.setAttribute("dir","rtl"),t.placeholder=e),v(this.value)}}()}setTimeout(function(){n.style.width=getComputedStyle(document.querySelector(".se-emojis")).width},50)}},h=function(){for(var[e,t]of u.groups.entries())document.querySelector('div[name="'+(t||r)+'"]').parentElement.style.display="block";const n=document.querySelector('div[name="'+a+'"]');n&&(n.innerText="",n.style.display="none")},v=function(t){if(t){{var e,n,i=t;const r=document.querySelector('div[name="'+a+'"]');r.innerHTML="<header><q>"+i+"</q></header><div></div>",r.style.display="block";for([e,n]of u.groups.entries())n&&(document.querySelector('div[name="'+n+'"]').parentElement.style.display="hidden");document.querySelector(".se-emojis-layer").scrollTop=0}t=t.toLowerCase();const s=document.querySelector('div[name="'+a+'"] div');for(var o in c.emojis)c.emojis[o].forEach(function(e){e&&-1<e.name.toLowerCase().indexOf(t)&&y(e,s)});""===s.innerText&&(s.innerHTML="&nbsp;")}else h()},i=function(){const t=document.querySelector('.se-emojis div[name="'+r+'"]');t.innerText="",c.emojis&&c.emojis[""]&&c.emojis[""].forEach(function(e){y(e,t)}),m(t)},y=function(e,t){switch(c.isSupported(e.emoji)){case 0:return;case 1:break;case 2:if(u.showFallbacks)break;return}const n=document.createElement("button");var i=e.skintone&&"neutral"!==u.skinTone?c.toSkinTone(Object.assign({},e).emoji,u.skinTone):e.emoji,o=e.name.charAt(0).toUpperCase()+e.name.slice(1);n.className="btn-emoji",n.type="button",n.title=o,n.innerHTML='<span class="emoji" data-emoji="'+e.emoji+'">'+i+"</span>",n.addEventListener("click",j.bind()),t.appendChild(n)},j=function(e){const t=e.target.querySelector("span");var e=t.innerText,n=t.getAttribute("data-emoji");"string"==typeof u.tagName&&""!==u.tagName?o.functions.insertHTML(`<${u.tagName} class="se-emoji">${e}</${u.tagName}>&zwj;`,!0,!0):o.functions.insertHTML(e,!0),u.showRecent&&c.registerEmoji(n)&&i()};return{name:"emojis",display:"submenu",innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" id="smiley"><path fill="#444" d="M8 1c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7zm0-1C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8z"></path><path fill="#444" d="M8 13.2c-2 0-3.8-1.2-4.6-3.1l.9-.4c.6 1.5 2.1 2.4 3.7 2.4s3.1-1 3.7-2.4l.9.4c-.8 2-2.6 3.1-4.6 3.1zM7 6a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM11 6a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"></path></svg>',title:"Insert Emojis",add:function(e,t){o=e;{var n=function(e,t){function n(){u[e]=d[e],console.warn(`emojis.${e} should be of type `+t)}"array"===t?Array.isArray(u[e])||n():typeof u[e]!==t&&n()};o.options.emojis&&(!1===o.options.emojis.captions&&(o.options.emojis.captions=Array(l.length).fill("")),u=Object.assign({},u,o.options.emojis),n("groups","array"),n("captions","array"),n("iconSize","string"),n("skinTone","string"),n("showFallbacks","boolean"))}let i=function(){const t=u.topmenu&&(u.topmenu.search||u.topmenu.iconSize||u.topmenu.skinTone);let e=this.util.createElement("div"),n=(e.className="se-submenu se-list-layer se-emojis-layer",e.style.paddingTop=0,'<div class="se-list-inner">');if(n+='<div class="se-emojis">',t){n+="<div>";n+='<div name="'+s+'" class="topmenu"></div>';n+="</div>"}if(u.showRecent){u.groups.unshift("");u.captions.unshift("");let e='style="';e+=t?'margin-top:2.2rem;"':'"';n+='<div name="'+r+'" '+e+"></div>"}if(t&&u.topmenu.search)n+='<div name="'+a+'" class="se-emojis-group" style="font-size:'+u.iconSize+';float:left;border-top:1px solid #dadada;width:100%;"></div>';for(const[i,o]of u.groups.entries())if(o)if(l.includes(o)){n+='<div class="se-emojis-group" style="font-size:'+u.iconSize+';">';if(u.captions[i])n+="<header>"+(u.captions[i]||o)+"</header>";n+='<div name="'+o+'"></div>';n+="</div>"}else console.warn('group "'+o+'" is not valid');return n+="</div>",e.innerHTML=n,e}.call(e);f(i),p(i.querySelector('div[name="'+s+'"]')),m(i.querySelector('div[name="'+r+'"]')),e.initMenuTarget("emojis",t,i),u.height&&(document.querySelector(".se-emojis").style.height=u.height,document.querySelector(".se-emojis-layer").style.overflowY="hidden"),u.width&&(document.querySelector(".se-emojis").style.width=u.width)}}}(Emojis);